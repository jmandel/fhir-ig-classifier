# fhir-directory-query: Analysis

## Core Purpose & Scope

- **Primary interoperability challenges this IG addresses:** This IG tackles the lack of standardization in accessing and exchanging healthcare directory information, which currently leads to scattered, uncoordinated, and often non-interoperable directory activities. It specifically addresses challenges related to provider, organization, and service data.
- **Key clinical/business problems it solves:** The IG aims to reduce the burden of maintaining and validating provider data, improve the accuracy and timeliness of directory information, and enable more efficient workflows for use cases such as electronic endpoint discovery, referrals, transitions of care, health plan enrollment, provider/service selection, and credentialing.
- **Intended scope and boundaries:** The IG focuses on a national directory scope, encompassing individuals and entities providing services impacting health and well-being. It includes data about community/social service entities and non-licensed administrative/support staff. Patient/caregiver information is considered out of scope. The IG provides a "floor" for the exchange of validated provider data, while describing additional data elements and capabilities that support more robust implementations.

## Technical Foundation

- **Core profiles and extensions:** The IG defines profiles for core FHIR resources: `Organization`, `Practitioner`, `Location`, `PractitionerRole`, `Endpoint`, `HealthcareService`, `VerificationResult`, `OrganizationAffiliation`, `InsurancePlan`, and `Consent` (used for restrictions). Key extensions include `PaymentAccepted`, `RequiredDocument`, `FundingSource`, `UsageRestriction`, `IGsSupported`, `EndpointType`, `Rating`, `SecureExchangeArtifacts`, `TrustFramework`, `DynamicRegistration`, `AssociatedServers`, `SecureEndpoint`, `OrgAliasPeriod`, `OrgAliasType`, `NewPatientProfile`, `HealthcareServiceReference`, `EndpointReference`, `DigitalCertificate`, `CareteamAlias`, `IdentifierStatus`, `Accessibility`, `CommunicationProficiency`, `ContactPointAvailableTime`, `DeliveryMethod`, `EndpointUsecase`, `LocationReference`, `NetworkReference`, `NewPatients`, `OrgDescription`, and `PractitionerQualification`.
- **Notable operations and interactions:** The IG supports RESTful interactions, primarily focusing on search operations (`GET`) to retrieve directory data. It also suggests the use of asynchronous interactions (Bulk Data standard) for large data sets and a subscribe/publish model for real-time updates.
- **Key terminology and value sets:** The IG utilizes standard terminologies like SNOMED CT, LOINC, NUCC Provider Taxonomy, and HL7 v2/v3 code systems. It also defines custom value sets for concepts like `ConsentScope`, `IgType`, `EndpointType`, `TrustFrameworkType`, `AcceptingPatients`, `Accessibility`, `DeliveryMethod`, `VirtualModalities`, `EndpointConnectionType`, `EndpointPayloadType`, `HealthcareServiceCategory`, `InsuranceProductType`, `InsurancePlanType`, `OrgType`, `QualificationStatus`, `LanguageProficiency`, `ProviderRole`, `OrgAliasType`, and `ValidationType`.
- **Significant patterns and constraints:** The IG emphasizes the use of search parameters for filtering and retrieving specific subsets of data. It defines constraints on resource elements, such as cardinality and data type restrictions. Invariants are used to enforce specific business rules, such as requiring at least one of `practitioner`, `organization`, `healthcareservice`, or `location` to be present in a `PractitionerRole`.

## Technical Essence

This IG defines a RESTful FHIR API for querying a national healthcare directory, leveraging core FHIR resources and custom profiles to represent providers, organizations, locations, services, and their relationships.  It mandates support for `Organization`, `Practitioner`, `Location`, `PractitionerRole`, `Endpoint`, `HealthcareService`, `VerificationResult`, and `OrganizationAffiliation` profiles, with optional support for `CareTeam`, `Network`, and `InsurancePlan`.  `Consent` is profiled as `Restriction` to manage access to sensitive data.  Key to the design is the use of search parameters on each resource type, enabling granular queries based on identifiers, status, type, relationships (e.g., `organization`, `location`, `network`), and other attributes.  For instance, `Endpoint` can be searched by `connection-type`, `identifier`, `mime-type`, `organization`, `payload-type`, `status`, `usecase-standard`, and `usecase-type`.  `OrganizationAffiliation` can be searched by `endpoint`, `location`, `network`, `participating-organization`, `primary-organization`, `role`, `service`, and `specialty`.  The IG mandates support for JSON and recommends XML formats.  Security is addressed through the SMART Backend Services Authorization Guide and the use of `AuditEvent` for logging.  The `VerificationResult` resource captures validation status and processes.  Custom extensions like `PaymentAccepted`, `NewPatients`, and `DeliveryMethod` enrich the core resources with directory-specific details.  The IG anticipates both real-time queries and bulk data extraction, as well as potential subscription mechanisms for updates.

## Implementation Approach

- **Critical workflows and interactions:** The primary workflow involves clients querying the directory server using RESTful `GET` requests with specific search parameters to retrieve relevant data. Bulk data extraction and subscription mechanisms are also envisioned for handling large datasets and real-time updates.
- **Important requirements and guardrails:** Implementations must support the defined profiles and their associated search parameters. They must adhere to the specified security requirements, including the use of TLS 1.2 or higher and the SMART Backend Services Authorization Guide. Audit logging using the `AuditEvent` resource is required.
- **Notable design choices and patterns:** The IG emphasizes a modular design, allowing implementations to support different subsets of profiles based on their specific needs. The use of search parameters enables flexible and granular data retrieval. The inclusion of the `VerificationResult` resource highlights the importance of data validation in a national directory context.

## Ecosystem Context

- **Target systems and users:** The primary target systems are local workflow environments, including payer organizations, provider organizations, HIEs, HISPs, CIEs, government agencies, and other entities that maintain healthcare directories. The target users are primarily systems rather than individual end-users.
- **Relationship to other standards/IGs:** The IG builds upon FHIR Release 4 and aligns with the US Core R4 build. It also considers the Provider Directory resources created under The Argonaut Project. It references the SMART Backend Services Authorization Guide for security.
- **Relevant jurisdictions or programs:** The IG was developed under the ONC Healthcare Directory Initiative (HcDir) and the Federal Health Architecture (FHA) in the US.
- **Primary use cases and scenarios:** The IG supports a variety of use cases, including electronic endpoint discovery, referrals and transitions of care, health plan enrollment, provider selection, service selection, and provider credentialing/privileging.

This analysis provides a comprehensive overview of the FHIR Implementation Guide for National Healthcare Directory Query, highlighting its key technical specifications, implementation considerations, and broader context within the healthcare interoperability landscape.
