# fhir-mCODE-ig: Analysis

## Core Purpose & Scope

The FHIR Implementation Guide for minimal Common Oncology Data Elements (mCODE) aims to improve interoperability in cancer care by defining a core set of structured data elements for oncology electronic health records (EHRs). It addresses the primary challenge of inconsistent data representation across different systems, which hinders the ability to aggregate and analyze data for research and quality improvement. By establishing a common data model, mCODE facilitates data exchange and enables comparative effectiveness analysis of cancer treatments. The scope is intentionally minimal and focused on data elements commonly found in EHRs, covering patient demographics, disease characteristics, genomics, treatments, and outcomes. It does not aim to be a comprehensive oncology data model but rather a foundational set of elements for interoperability.

## Technical Foundation

mCODE is built on FHIR R4 and leverages US Core profiles as its foundation. It defines approximately 40 FHIR profiles, including core profiles like `CancerPatient`, `PrimaryCancerCondition`, `CancerRelatedMedicationRequest`, `CancerRelatedSurgicalProcedure`, `RadiotherapyCourseSummary`, `Tumor`, and `TumorMarkerTest`. Key extensions include `HistologyMorphologyBehavior`, `BodyLocationQualifier`, `LateralityQualifier`, `ProcedureIntent`, and `TreatmentTerminationReason`. The IG defines operations like `$mcode-patient-everything` for retrieving a patient's mCODE bundle. It heavily utilizes SNOMED CT, LOINC, ICD-O-3, ICD-10-CM, and RxNorm for terminology, with value sets like `PrimaryCancerDisorderVS`, `CancerStageTypeVS`, and `TumorMarkerTestVS`. Significant patterns include the use of `Observation` to represent staging, tumor markers, and disease status, and the use of `Condition` to represent primary and secondary cancers. Constraints are placed on cardinality, value sets, and code systems to ensure consistency.

## Technical Essence

mCODE defines a minimal oncology data model using FHIR R4, extending US Core profiles where applicable. `CancerPatient` profiles patient demographics, referencing `PrimaryCancerCondition` and `SecondaryCancerCondition` for diagnoses, coded using SNOMED CT, ICD-10-CM, or ICD-O-3. Cancer staging is represented using `CancerStage` and its specializations (e.g., `TNMStageGroup`), referencing the cancer condition and utilizing LOINC and SNOMED CT for stage types and values. `TumorMarkerTest` profiles lab results for tumor markers. Genomic data is captured using `GenomicsReport`, `GenomicVariant`, and `GenomicRegionStudied`, based on the HL7 Clinical Genomics Reporting IG. Treatments are represented using `CancerRelatedMedicationRequest`, `CancerRelatedMedicationAdministration`, `CancerRelatedSurgicalProcedure`, and `RadiotherapyCourseSummary`. Outcomes are captured using `CancerDiseaseStatus`, `Tumor`, and `TumorSize`. The `$mcode-patient-everything` operation retrieves a patient-specific bundle of mCODE resources. Key extensions like `HistologyMorphologyBehavior`, `BodyLocationQualifier`, and `LateralityQualifier` enhance specificity. Value sets constrain terminology usage, ensuring consistent representation of core oncology concepts.

## Implementation Approach

Implementers are expected to support at least one of the defined methods for identifying in-scope cancer patients, using either a `Group` resource or specific search parameters on `Patient` and `Condition`. Senders must populate Must-Support elements for all supported profiles, while receivers must meaningfully process them. The IG defines specific search parameters for retrieving mCODE-conforming resources. The `$mcode-patient-everything` operation is recommended for retrieving a patient's complete mCODE data. The use of `meta.profile` to signal conformance is encouraged. The IG emphasizes the importance of using standardized terminologies and provides detailed guidance on coding cancer diagnoses, staging, and other key concepts.

## Ecosystem Context

mCODE targets EHR systems, cancer registries, research networks, and other systems involved in cancer care and research. It is sponsored by HL7 and developed in collaboration with organizations like ASCO, MITRE, and CodeX. It extends US Core and aligns with the HL7 Clinical Genomics Reporting IG. The IG is intended for use in the United States, as indicated by its reliance on US Core and the use of US-specific terminologies like ICD-10-CM. It supports use cases like comparative effectiveness analysis, next-generation sequencing reporting, and data exchange between health systems. The primary scenarios involve querying for in-scope patients, retrieving patient bundles, and exchanging specific data elements like cancer diagnosis, staging, and treatment information. The inclusion of pediatric-specific profiles and examples in STU4, driven by the NCI's CC-DIRECT initiative, expands its applicability to pediatric oncology.
