# fhir-us-ndh: Analysis

## Core Purpose & Scope

-   **Primary interoperability challenges this IG addresses:** The National Directory of Healthcare Providers & Services (NDH) Implementation Guide (IG) addresses the lack of a unified, standardized, and interoperable national directory infrastructure in the US. It tackles challenges related to data accuracy, consistency, and accessibility across various healthcare directories maintained by providers, payers, health information exchanges (HIEs/HIOs), and other entities. The IG aims to streamline the process of managing and validating provider demographic information, reducing redundancy and improving data quality.
-   **Key clinical/business problems it solves:** The IG solves problems related to electronic endpoint discovery, referrals and transitions of care, health plan enrollment, provider and service selection, provider credentialing/privileging, and claims management. It reduces the administrative burden on providers and organizations by providing a single source of truth for directory information, minimizing the need for redundant data entry and validation across multiple systems.
-   **Intended scope and boundaries:** The IG provides standards and guidance for a national directory infrastructure, including a national source of truth for information about providers, health organizations, and related services, their relationships, and technical connectivity details (i.e., electronic endpoints). It defines FHIR APIs for accessing and contributing to the national directory, as well as for facilitating verification of directory content. The IG does not mandate specific implementation approaches for local directories but provides optional capability statements for various use cases. It also includes a Restriction profile based on the Consent resource to convey restrictions associated with data elements or resources.

## Technical Foundation

-   **Core profiles and extensions:** The IG defines base profiles for CareTeam, Endpoint, HealthcareService, InsurancePlan, Location, Network, Organization, OrganizationAffiliation, Practitioner, PractitionerRole, Restriction (based on Consent), and Verification (based on VerificationResult). It also defines numerous extensions to capture NDH-specific data elements, such as accessibility options, communication proficiency, endpoint connection type versions, funding sources, and verification status.
-   **Notable operations and interactions:** The IG supports RESTful FHIR APIs for querying and retrieving data from the national directory (GET requests). It defines a scheduled export operation ($ndhschExport) for bulk data extraction and supports subscriptions for receiving updates on data changes. The IG also provides guidance on attestation and verification workflows, including the use of POST and PUT methods for submitting attested data.
-   **Key terminology and value sets:** The IG defines several custom code systems and value sets, including AcceptingPatientsCS, AccessibilityCS, EndpointConnectionTypeCS, HealthcareServiceCategoryCS, OrgAliasTypeCS, OrganizationAffiliationRoleCS, PractitionerRoleCS, QualificationStatusCS, and TrustFrameworkTypeCS. It also utilizes standard value sets from FHIR, US Core, and other relevant terminologies.
-   **Significant patterns and constraints:** The IG constrains several elements across profiles, such as requiring specific codes or value sets, limiting cardinality, and defining mandatory elements. It also defines invariants to ensure data consistency and validity. The IG uses extensions extensively to capture NDH-specific data elements and relationships.

## Technical Essence

The fhir-us-ndh IG establishes a FHIR-based national directory by defining a core set of profiles built upon FHIR R4 and US Core 6.1.0, including constrained versions of Organization, Practitioner, Location, PractitionerRole, Endpoint, HealthcareService, InsurancePlan, and Network. It introduces specialized profiles for Verification (based on VerificationResult) and Restriction (based on Consent) to manage data validation and usage limitations. Key extensions include `ndh-Accessibility`, `ndh-EndpointConnectionTypeVersion`, `ndh-FundingSource`, `ndh-VerificationStatus`, and `ndh-UsageRestriction`. The IG supports RESTful interactions, primarily GET for querying directory data, with search parameters defined for each profile. A custom `$ndhschExport` operation enables scheduled bulk data export, while subscriptions (utilizing R5 backported artifacts) provide real-time updates. The IG mandates support for specific code systems like `AcceptingPatientsCS` and `AccessibilityCS`, and value sets like `EndpointConnectionTypeVS`. Data integrity is enforced through invariants, such as ensuring distinct plan types within an `InsurancePlan`. The `ndh-Verification` profile captures verification processes against primary sources, while `ndh-Restriction` manages data access limitations down to the element level using contained Consent resources.

## Implementation Approach

-   **Critical workflows and interactions:** The IG outlines workflows for attestation, validation, verification, data retrieval via FHIR API, scheduled export, and subscription. Attestation involves authorized entities submitting information about themselves, their roles, and relationships via a FHIR API (using POST or PUT). Validation checks the structure and content of submitted data against defined profiles and terminologies. Verification involves verifying attested data against primary sources, either through APIs or other methods. Data retrieval is primarily through GET requests using defined search parameters.
-   **Important requirements and guardrails:** Implementers must support the defined profiles and extensions, including mandatory elements and constraints. They must adhere to the specified capability statements and support the defined operations. The IG provides guidance on managing collisions and duplicate records. Implementers must also make attestation and verification requirements available to stakeholders.
-   **Notable design choices and patterns:** The IG uses a combination of profiles, extensions, and operations to define a comprehensive data model and API for the national directory. It leverages the FHIR resource model and RESTful interactions to facilitate interoperability. The use of contained resources for managing restrictions and the definition of specific capability statements for different use cases are notable design choices.

## Ecosystem Context

-   **Target systems and users:** The primary target systems are local directories, payer organizations, provider organizations, health information exchanges (HIEs), health information service providers (HISPs), Community Information Exchanges (CIEs), government agencies, and any other entities that maintain a healthcare directory and/or have a need for verified provider data. The target users include individuals, organizations, and authorized representatives involved in attestation, verification, and data retrieval.
-   **Relationship to other standards/IGs:** The IG builds upon FHIR R4 and US Core 6.1.0. It also references the Validated Healthcare Directory IG (International) and the DaVinci PDex Plan Net IG (US Realm). The IG incorporates elements from the IHE mCSD profile and utilizes concepts from SMART on FHIR and UDAP for security and authorization.
-   **Relevant jurisdictions or programs:** The IG is primarily focused on the US healthcare system and is relevant to programs such as the CMS National Plan and Provider Enumeration System (NPPES) and the Medicare Provider Enrollment, Chain, and Ownership System (PECOS).
-   **Primary use cases and scenarios:** The IG supports a wide range of use cases, including electronic endpoint discovery, referrals and transitions of care, health plan enrollment, provider and service selection, provider credentialing/privileging, claims management, care coordination, quality reporting, and fraud detection. Specific scenarios include attesting to individual or organizational information, verifying data against primary sources, querying for providers based on various criteria, subscribing to data updates, and performing bulk data export.
