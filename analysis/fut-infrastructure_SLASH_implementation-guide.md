# Implementation-guide: Analysis

## Core Purpose & Scope

This Implementation Guide (IG) defines the Danish eHealth Infrastructure, providing a set of FHIR profiles, extensions, and terminologies to enable interoperable, quality-focused healthcare applications within Denmark. It primarily addresses interoperability challenges related to sharing clinical and administrative data across different healthcare systems and organizations within the Danish national infrastructure. The IG aims to solve key clinical and business problems such as enabling consistent data exchange for care coordination, patient monitoring, and reporting. The scope is bounded to the Danish national eHealth context, focusing on interactions between healthcare providers, patients, and national health data services.

## Technical Foundation

The IG is built upon FHIR R4 and leverages several core profiles, including `ehealth-careplan`, `ehealth-servicerequest`, `ehealth-observation`, `ehealth-message`, `ehealth-appointment`, `ehealth-organization`, and `ehealth-patient`. It defines custom extensions like `ehealth-participant`, `ehealth-include-as-extra`, and `ehealth-resolved-timing` to address specific Danish requirements. Notable operations include `DocumentReference` search, `apply` on `PlanDefinition`, `search-measurements-bundle-limit`, and various custom operations for document transformation and reporting. Key terminology systems include `urn:oid:1.2.208.176.2.1` (NPU codes), `urn:oid:1.2.208.176.2.4` (SKS codes), `http://ehealth.sundhed.dk/cs/task-category`, and `http://ehealth.sundhed.dk/vs/measurement-sharing-approval-policies`. Significant patterns include the use of extensions for context (e.g., `workflow-episodeOfCare`), status history, and the enforcement of specific coding systems for various elements.

## Technical Essence

This IG defines a core set of FHIR resources tailored for the Danish eHealth Infrastructure, centered around `CarePlan`, `ServiceRequest`, and `Observation`. `CarePlan` instances, derived from `PlanDefinition`, orchestrate activities using `ServiceRequest`, which can trigger `Observation` or `QuestionnaireResponse` creation. `ehealth-participant` extension is used across resources to capture participant roles and functions, searchable via composite parameters. `ServiceRequest` uses `ehealth-include-as-extra` to flag activities for specific reporting. `Task` resources, profiled as `ehealth-task`, manage automated processing and workflow, with `ehealth-resolved-timing` capturing timing details. `DocumentReference` search integrates with the national IHE XDS.b infrastructure, supporting break-the-glass queries. Custom operations like `transform-from-QRD-based-on-questionnaire` on `DocumentTransformation` service enable document format conversions. The IG mandates specific coding systems for key elements, such as NPU codes for `Observation.code` and SKS codes for conditions. `ehealth-message` profile supports secure messaging with extensions for thread and group identifiers.

## Implementation Approach

The IG is designed to be implemented by healthcare providers, system vendors, and national health data services within Denmark. Critical workflows include creating and managing `CarePlan` and `EpisodeOfCare` resources, submitting measurements via `Observation`, `Media`, and `QuestionnaireResponse`, and querying for documents using `DocumentReference` search. Implementers must adhere to the defined profiles and extensions, ensuring proper use of coded values and identifiers as specified in the IG. The IG emphasizes the use of extensions to capture context, such as `workflow-episodeOfCare`, and to manage resource history, like `ehealth-servicerequest-statusHistory`. The use of `ehealth-participant` extension is a notable design choice to consistently capture participant information across resources.

## Ecosystem Context

The target systems for this IG include electronic health record (EHR) systems, patient portals, care coordination platforms, and national health data registries within Denmark. The primary users are healthcare professionals, patients, and system administrators. The IG relates to other standards such as IHE MHD and SDC, and it aligns with Danish national healthcare programs and regulations. The primary use cases include care planning and coordination, remote patient monitoring, clinical decision support, quality reporting, and secure exchange of health information between different healthcare organizations and with patients. The IG is specifically designed for the Danish jurisdiction, as indicated by the use of Danish terminology systems and references to Danish healthcare regulations.
