# davinci-crd: Analysis

## Core Purpose & Scope

-   **Primary interoperability challenges this IG addresses:** This IG primarily addresses the challenge of automating the exchange of information between providers and payers to determine coverage requirements for healthcare services, medications, and devices. It focuses on reducing the administrative burden associated with manual processes like prior authorization and aims to improve the efficiency and accuracy of coverage determination.
-   **Key clinical/business problems it solves:** The IG solves problems related to claim denials, service delays, and financial burdens on patients and providers due to lack of clarity on coverage requirements. It streamlines the process of obtaining coverage information, reducing the need for manual intervention and improving the timeliness of care delivery.
-   **Intended scope and boundaries:** The scope of this IG is limited to the discovery of coverage requirements at the point of care. It defines a workflow for providers to query payer systems for coverage information but does not cover the actual submission of prior authorization requests (which is addressed by the PAS IG) or the exchange of detailed clinical documentation (which is addressed by the DTR and CDex IGs).

## Technical Foundation

-   **Core profiles and extensions:**
    -   **Profiles:** The IG defines profiles for various FHIR resources, including `Appointment`, `CommunicationRequest`, `Coverage`, `Device`, `DeviceRequest`, `Encounter`, `Location`, `MedicationRequest`, `NutritionOrder`, `Organization`, `Patient`, `ServiceRequest`, `Task`, and `VisionPrescription`. These profiles are based on US Core profiles where available and extend them with additional constraints and elements specific to CRD.
    -   **Extensions:** The key extension is `CRDCoverageInformation`, which captures assertions from a payer about coverage, prior authorization requirements, and the need for additional documentation. Other notable extensions include `davinci-crd.configuration-options` and `davinci-crd.configuration` for configuring CDS Hooks services, and `davinci-associated-resource` for linking cards to specific requests.
-   **Notable operations and interactions:** The IG leverages CDS Hooks to trigger real-time queries from provider systems to payer systems. It defines six hooks: `appointment-book`, `encounter-start`, `encounter-discharge`, `order-dispatch`, `order-select`, and `order-sign`. The interaction involves the provider system sending a CDS Hooks request with context information, and the payer system responding with cards and/or system actions that provide coverage guidance. The IG also supports prefetch and direct FHIR queries to retrieve additional patient data.
-   **Key terminology and value sets:** The IG utilizes standard terminologies like CPT, SNOMED CT, LOINC, and RxNorm, as well as custom value sets for specific concepts like card types, coverage assertion reasons, and CMS location codes.
-   **Significant patterns and constraints:** The IG mandates the use of TLS for secure communication and defines specific performance expectations for CRD services. It also specifies rules for handling multiple active coverages, controlling hook invocation, and managing access tokens.

## Technical Essence

The Da Vinci CRD IG enables real-time coverage requirements discovery by defining a CDS Hooks-based interaction between provider and payer systems. Provider systems trigger hooks like `order-sign` or `appointment-book`, sending a request with context resources (e.g., `MedicationRequest`, `Appointment`) profiled to constrain elements like `status`, `intent`, and references to other resources. Payers respond with cards containing guidance, potentially including a `systemAction` to update the request with a `CRDCoverageInformation` extension. This extension asserts `covered` (yes/no/conditional), `pa-needed` (yes/no/satisfied/conditional), `doc-needed` (clinical/admin/patient/conditional), and `info-needed` (performer/location/timeframe/contract-window) statuses, along with optional `billingCode`, `reason`, `detail`, `dependency`, `questionnaire`, `date`, `coverage-assertion-id`, `satisfied-pa-id`, `contact`, and `expiry-date` elements. Payers can use the provided access token to query the provider's FHIR endpoint for additional resources, leveraging US Core profiles and search parameters. Configuration options, conveyed via extensions, allow providers to control the types of cards returned. The `satisfied-pa-id` can be used as a prior authorization number in the X12 837 claim under CMS enforcement discretion.

## Implementation Approach

-   **Critical workflows and interactions:** The core workflow involves the provider initiating a CDS Hooks call when performing actions like ordering a service or booking an appointment. The payer system receives the request, optionally retrieves additional data, evaluates coverage rules, and returns cards and/or system actions. The provider system then displays the cards to the user and/or applies the system actions.
-   **Important requirements and guardrails:** CRD services must respond within specified timeframes (5 or 10 seconds, depending on the hook). They must also ensure the accuracy of coverage information and adhere to security and privacy rules. CRD clients must manage access tokens, handle multiple coverages, and control hook invocation based on payer and patient context.
-   **Notable design choices and patterns:** The use of CDS Hooks for real-time interaction, the definition of specific profiles and extensions to capture coverage information, and the support for both prefetch and direct FHIR queries are notable design choices. The IG also introduces a mechanism for configuring CDS Hooks services and linking cards to specific requests.

## Ecosystem Context

-   **Target systems and users:** The primary target systems are EHRs, EMRs, practice management systems, and payer systems. The users include clinicians, administrative staff, and potentially patients.
-   **Relationship to other standards/IGs:** CRD builds upon FHIR R4, CDS Hooks, SMART on FHIR, US Core, HRex, and other Da Vinci IGs (DTR, PAS, CDex). It complements these IGs by providing a mechanism for discovering coverage requirements, which can then be used to inform subsequent processes like prior authorization and documentation exchange.
-   **Relevant jurisdictions or programs:** The IG is particularly relevant to the US healthcare system and aligns with CMS initiatives to reduce burden and improve interoperability.
-   **Primary use cases and scenarios:** The main use cases involve providers discovering coverage requirements for various services, medications, and devices at the point of care. This includes scenarios like ordering a CT scan, prescribing a medication, referring a patient to a specialist, and scheduling an appointment. The IG also supports "what-if" scenarios where providers can explore coverage requirements without actually creating an order or appointment.
