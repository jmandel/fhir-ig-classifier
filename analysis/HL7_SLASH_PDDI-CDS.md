# PDDI-CDS: Analysis

## Core Purpose & Scope

This Implementation Guide (IG) addresses the challenge of improving the specificity and clinical relevance of potential drug-drug interaction (PDDI) alerts within electronic health records (EHRs). It aims to reduce alert fatigue by leveraging patient-specific data and presenting actionable information earlier in the computerized provider order entry (CPOE) workflow. The IG focuses on inpatient and outpatient drug therapy ordering, providing a framework for contextualized PDDI Clinical Decision Support (CDS) using modern standards like FHIR, CDS Hooks, and CQL. The scope is limited to drug-drug interactions, excluding interactions with vitamins, herbals, and food, but acknowledges the potential for future expansion.

## Technical Foundation

The IG's technical foundation rests on **FHIR R4**, **CDS Hooks 1.0/1.1**, and **CQL**. It defines two core CDS Hooks triggers: `order-select` and `order-sign`, with an optional `patient-view`.

-   **Core Profiles and Extensions:** The IG leverages standard FHIR resources like `MedicationRequest`, `MedicationStatement`, `Condition`, `Observation`, `Patient`, `PlanDefinition`, `Library`, and `RequestGroup`. It introduces extensions for configuration options within CDS Hooks requests, such as `cache-for-order-sign-filtering` and `filter-out-repeated-alerts` to manage alert duplication between `order-select` and `order-sign`.
-   **Notable Operations and Interactions:** The IG specifies a RESTful API interaction pattern between the EHR (client) and a remote CDS service. Key operations include CDS Discovery, CDS Hooks requests (POST with JSON payload), and CDS Hooks responses (cards).
-   **Key Terminology and Value Sets:** The IG utilizes RxNorm, LOINC, SNOMED CT, and ICD-10 for representing drugs, lab results, conditions, and clinical consequences. It defines a framework for composite, element, and element-exclude value sets to manage terminology for PDDI CDS.
-   **Significant Patterns and Constraints:** The IG emphasizes the use of prefetch templates to optimize CDS service performance. It mandates the use of CDS Hooks and recommends the use of CQL for expressing PDDI logic. It also introduces a mechanism for coordinating between `order-select` and `order-sign` to prevent alert duplication, using configuration options and caching.

## Technical Essence

This IG defines a service-based architecture for contextualized PDDI alerts, triggered via CDS Hooks at `order-select` and `order-sign` during CPOE. EHR clients subscribe to a remote CDS service, initiating a CDS Discovery to obtain prefetch templates. Upon a hook trigger, the client sends a CDS Hooks request (HTTP POST) containing a JSON payload with `context` (user, patient, encounter, draft orders, and configuration options like `cache-for-order-sign-filtering` and `filter-out-repeated-alerts`) and optional `prefetch` data (FHIR resources like `MedicationRequest`, `MedicationStatement`, `Condition`, `Observation`). The CDS service, potentially using a CQL engine, processes the request, evaluates FHIR data, and returns a CDS Hooks response with cards. Each card contains a `summary`, `indicator` (info, warning, critical), `detail`, and optional `suggestions` with `actions` (`create`, `update`, `delete`) and associated FHIR resources (e.g., `MedicationRequest` for a suggested alternative). The `order-select` service caches relevant medication data. The `order-sign` service uses this cache, along with configuration options, to filter out previously displayed alerts if `filter-out-repeated-alerts` is set to `true`. The service utilizes `PlanDefinition` resources to encapsulate the PDDI logic, referencing CQL libraries that define data requirements and evaluation criteria. Value sets, structured using a composite, element, and element-exclude framework, are employed for precise terminology management.

## Implementation Approach

The IG outlines two implementation levels: Basic (using only `order-sign`) and Advanced (using both `order-select` and `order-sign`). The Advanced implementation requires coordination between the two hooks to prevent alert duplication. Implementers must define prefetch templates tailored to each PDDI scenario, considering data availability and look-back periods. The IG emphasizes the importance of involving clinicians in configuration decisions related to alert filtering and presentation. The use of `PlanDefinition` and CQL is recommended for creating sharable and maintainable PDDI knowledge artifacts. The IG provides detailed examples of CDS Hooks requests and responses, along with semi-structured logic diagrams for two exemplar PDDIs: Warfarin + NSAIDs and Digoxin + Cyclosporine.

## Ecosystem Context

The primary target systems are EHRs with CPOE capabilities, and the target users are clinicians involved in medication ordering. The IG aligns with broader efforts to standardize CDS, such as CDS Connect, and builds upon the W3C Community Group's minimal information model for PDDIs. It is relevant to jurisdictions and programs focused on medication safety and reducing alert fatigue, particularly in the United States, as evidenced by the use of US-specific terminology sets and references to Meaningful Use incentives. The primary use cases involve providing clinicians with actionable, patient-specific PDDI alerts during medication ordering, with a focus on improving alert specificity and reducing unnecessary interruptions. The IG also touches upon the potential for PDDI CDS at patient-view, suggesting its use for shared decision-making.
