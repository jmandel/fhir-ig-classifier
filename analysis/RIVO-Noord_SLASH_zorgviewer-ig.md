# zorgviewer-ig: Analysis

## Core Purpose & Scope

-   **Primary interoperability challenges this IG addresses:** The Zorgviewer IG primarily addresses the challenge of providing a unified view of patient data scattered across different healthcare systems within the RIVO-Noord region of the Netherlands. It tackles the lack of standardized data exchange between systems like Epic, ChipSoft, Topicus, and Nexus, enabling a consolidated view of patient information for healthcare providers.
-   **Key clinical/business problems it solves:** It solves the problem of fragmented patient information, improving care coordination by offering a 360-degree view of the patient's medical history, including problems, allergies, medications, lab results, procedures, and care plans. This facilitates better-informed clinical decision-making, especially in acute care settings and across different healthcare providers.
-   **Intended scope and boundaries:** The IG's scope is focused on enabling a regional health information viewer (Zorgviewer) within the RIVO-Noord region. It defines how various Electronic Health Record (EHR) systems can expose patient data through FHIR APIs, allowing the Zorgviewer to aggregate and display this information. The IG is designed for use by healthcare providers within the region and is not intended for patient access or data exchange outside of RIVO-Noord. It is initially focused on read-only access, with future plans for data exchange.

## Technical Foundation

-   **Core profiles and extensions:** The IG defines constraints on FHIR STU3 resources, aligning them with the Dutch ZIB 2017 standards. Key profiles include `Patient`, `Practitioner`, `Organization`, `Condition`, `AllergyIntolerance`, `Procedure`, `Observation` (for lab results), `MedicationRequest`, `MedicationStatement`, `DocumentReference`, `Flag`, `Immunization`, `Consent`, and `AuditEvent`. Notable extensions include `extension-Meta.source` for indicating the data source and custom extensions for specific data elements within profiles like `TreatmentDirective`.
-   **Notable operations and interactions:** The IG specifies FHIR RESTful interactions, primarily using `GET` operations for retrieving data. It defines search parameters for each resource, such as searching for a `Patient` by BSN or retrieving `Conditions` for a specific patient. The IG also outlines the use of SMART-on-FHIR for launching the Zorgviewer from within EHR systems and handling authentication and authorization.
-   **Key terminology and value sets:** The IG leverages SNOMED CT for clinical coding, LOINC for lab results, and national code systems like AGB for healthcare provider identification. It defines custom value sets, such as the `ACPTreatmentCodelist` for advance care planning.
-   **Significant patterns and constraints:** The IG mandates the inclusion of the `meta.extension("http://hl7.org/fhir/4.0/StructureDefinition/extension-Meta.source")` in each resource to identify the source system. It defines specific UI guidance for displaying data in the Zorgviewer, including column definitions and sorting rules. The IG also specifies constraints on resource elements, such as requiring the use of `onsetPeriod` in `Condition` for vague dates and defining a specific algorithm for constructing the `Patient.name`.

## Technical Essence

The Zorgviewer IG enables a regional health information viewer by defining a constrained FHIR STU3 API for Dutch EHR systems. It mandates that each resource returned by a source system includes a `meta.extension` identifying the source via AGB, OID, or URA. The IG profiles core clinical resources like `Condition`, `AllergyIntolerance`, `Procedure`, `Observation`, `MedicationRequest`, `MedicationStatement`, `DocumentReference`, `Flag`, and `Immunization`, aligning them with ZIB 2017 and specifying search parameters for each. For instance, `Condition` searches use `patient` and optionally `clinical-status`, while `Observation` searches for lab results leverage `$lastn` with a `category` filter for clinical chemistry. `DocumentReference` searches are performed with `patient` and `status=current`. Authentication is handled via SMART-on-FHIR or SAML, depending on the source system. The Zorgviewer aggregates data from multiple sources, identified by the `meta.source` extension, and presents it according to defined UI guidance, including specific column layouts and sorting rules for each resource type. The IG also defines a `PlanDefinition` for the BgZ 2017 dataset, enabling filtered data retrieval based on specific care pathways.

## Implementation Approach

-   **Critical workflows and interactions:** The primary workflow involves launching the Zorgviewer from an EHR system, authenticating the user, selecting a patient, determining the relevant source systems based on patient consent (or a regional equivalent for MVP2), querying each source system's FHIR API, aggregating the results, and displaying the unified view to the user.
-   **Important requirements and guardrails:** Implementers must ensure that their FHIR APIs conform to the defined profiles and constraints. They must include the `meta.source` extension in each resource. Source systems must implement logging according to NEN 7513, capturing user actions and data access. The Zorgviewer must respect patient consent when querying source systems.
-   **Notable design choices and patterns:** The IG adopts a read-only approach initially, focusing on data retrieval and display. It leverages SMART-on-FHIR for seamless integration with EHR systems. The use of `meta.source` for source identification is a key design choice, enabling data provenance and source-specific display logic. The defined UI guidance ensures a consistent user experience across different data sources.

## Ecosystem Context

-   **Target systems and users:** The primary target systems are EHRs used in the RIVO-Noord region, including Epic, ChipSoft, Topicus, and Nexus. The target users are healthcare providers within the region who need access to a consolidated view of patient data.
-   **Relationship to other standards/IGs:** The IG builds upon FHIR STU3 and aligns with the Dutch ZIB 2017 standards. It references other standards like NEN 7510, 7512, 7513, and 7540 for security, logging, and data exchange. It also relates to initiatives like MedMij and VIPP5.
-   **Relevant jurisdictions or programs:** The IG is specifically designed for the RIVO-Noord region in the Netherlands and is part of the regional Zorgviewer MVP2 project.
-   **Primary use cases and scenarios:** The primary use cases include viewing a patient's medical history during a consultation, accessing lab results from different labs, reviewing medication lists from various providers, and accessing care plans and advance directives. The IG also supports acute care scenarios by providing quick access to critical information like allergies, medications, and treatment directives.
