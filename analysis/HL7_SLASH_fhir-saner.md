# fhir-saner: Analysis

## Core Purpose & Scope

The HL7 FHIR Situational Awareness for Novel Epidemic Response (SANER) Implementation Guide (IG) addresses the critical need for real-time exchange of situational awareness information between healthcare facilities and public health agencies during public health emergencies, such as the COVID-19 pandemic. It focuses on enabling the transmission of high-level data regarding hospital capacity, resource utilization, and patient impact from healthcare facilities to centralized data repositories. The IG's scope is primarily centered on inpatient settings and covers essential elements of information (EEIs) like bed availability, ventilator utilization, and COVID-19 patient statistics, with the ability to extend to other resources like PPE and staffing. It aims to improve the timeliness, accuracy, and completeness of data reported to public health agencies, facilitating better-informed decision-making and resource allocation during emergencies.

## Technical Foundation

The SANER IG is built upon FHIR Release 4 (R4) and leverages core FHIR resources like Measure, MeasureReport, Location, and Organization. It defines specific profiles such as `PublicHealthMeasure`, `PublicHealthMeasureReport`, and `PublicHealthMeasureLibrary` to standardize the representation of situational awareness measures and their reporting. Key extensions include `MeasureExpectation`, `ReportingPeriod`, `MeasureAlternateCriteria`, and `MeasureGroupAttributes`. The IG defines transactions like `Query Measure`, `Produce Measure`, `Query Measure Definition`, and `Compute Measure` to facilitate data exchange. It utilizes standard terminologies like SNOMED CT, LOINC, and ICD-10-CM, and defines custom value sets and code systems for specific concepts like measure scoring and population types. Notable patterns include the use of FHIRPath and CQL for measure computation, and the use of CSV format for data exchange with systems that do not yet support FHIR.

## Technical Essence

SANER defines a framework for representing and exchanging situational awareness measures using FHIR. A `PublicHealthMeasure` resource, identified by a canonical URL and version, describes a specific measurement (e.g., bed availability) using a title, description, and computable criteria expressed in FHIRPath or CQL. The `Measure.group` element, extended with `MeasureGroupAttributes`, defines the scoring method (e.g., capacity, event-growth), measure type (e.g., structure, process, outcome), improvement notation, and subject type (e.g., Location, Device). Each group contains populations (e.g., numerator, denominator) with criteria defining how to compute the measure from underlying resources (e.g., Encounter, Observation). `PublicHealthMeasureLibrary` resources, referenced by the Measure, provide supporting definitions like value sets and code systems. A `PublicHealthMeasureReport` instance, linked to a specific Measure, reports the computed values for a given location (subject) and reporting period, with optional stratification. Measure Sources implement either a push model (using `create` or `update` operations) or a pull model (supporting `search` and `read` operations) to transmit MeasureReports to Measure Consumers. The `Compute Measure` transaction involves a Measure Computer retrieving a Measure definition, querying a Data Source for relevant FHIR resources based on the defined criteria, computing the measure populations and scores, and generating a MeasureReport. The `aggregate` operation allows combining multiple MeasureReports into a consolidated report.

## Implementation Approach

Implementers of SANER will primarily focus on creating Measure Source and Measure Consumer actors. Measure Sources will need to map their internal data models to the defined FHIR profiles and implement either the push or pull model for transmitting MeasureReports. Measure Consumers will need to be able to receive or query for MeasureReports and process the contained data. Measure Computers will need to implement the logic for evaluating the computable criteria defined in the Measure resources, potentially leveraging FHIRPath or CQL engines. The IG emphasizes the use of national core profiles and value sets to ensure consistency within a region. It also provides guidance on handling optional elements and using the `data-absent-reason` extension when data is unavailable. The use of CSV format is supported for integration with legacy systems.

## Ecosystem Context

The SANER IG targets healthcare facilities (hospitals, clinics), public health agencies (local, regional, national), and emergency response organizations. It is designed to be used in conjunction with national FHIR implementation guides (e.g., US Core, UK Core) and leverages existing terminologies like SNOMED CT and LOINC. It is particularly relevant to programs like the CDC's National Healthcare Safety Network (NHSN) and is intended to support use cases such as collecting hospital capacity data, distributing measure definitions, automating measure computation, and reporting supplemental data for deeper analysis. The IG acknowledges the need for flexibility and extensibility to adapt to evolving public health emergencies and reporting requirements.
